<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:adm="http://github.com/adminfaces"
	template="#{layoutMB.template}">


	<ui:define name="metadata">
		<ui:param name="title"
			value="Medición: # #{listaMedicionesMB.evaluacionDTO.evaluacion.idEvaluacion} -
			#{listaMedicionesMB.evaluacionDTO.evaluacion.activoEvaluacion ? 'ACTIVO':'INACTIVO'} - 
			#{listaMedicionesMB.evaluacionDTO.evaluacion.estadoEvaluacionIdEstado.nombreEstado}">

		</ui:param>
		<!-- Automatic create breadCrumb and page title when param 'title' is provided. -->
		<style type="text/css">
.ui-datatable .ui-datatable-header {
	text-align: left !important;
}

.ui-panelgrid.showcase-text-align-center .ui-grid-responsive .ui-panelgrid-cell
	{
	text-align: center;
}

.customPanelGrid .ui-panelgrid-content {
	align-items: center;
}

.ui-sticky {
	top: 70px !important;
}

@media ( max-width : 960px) {
	.ui-sticky {
		top: 110px !important;
	}
}
</style>
	</ui:define>

	<ui:define name="body">




		<div class="">
			<h:form id="form">

				<p:commandButton title="Regresar a Listado de Mediciones"
					style="color:white;
					width:min-content;
					background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab) !important;
					background-size: 400% 400% !important;
					animation: gradient 15s ease infinite !important;"
					action="#{listaMedicionesMB.goBackListaMediciones()}" value="Atrás"
					icon="fa fa-reply" />


				<p:panelGrid columns="2" layout="grid"
					columnClasses="ui-grid-col-4,ui-grid-col-8"
					styleClass="ui-panelgrid-blank">


					<p:panelGrid columns="1" layout="grid">


						<p:panel styleClass="text-muted well well-sm no-shadow">
						<p:graphicImage style="height: inherit;"
									value="#{listaMedicionesMB.fotoEmpresa}" cache="true"
									alt="Logo Cliente" title="Logo de La Cliente" />
						<div class="description-block text-muted well well-sm no-shadow">
							<span class="info-box-text">AGENCIA:
								#{listaMedicionesMB.evaluacionDTO.empleado.agenciaIdAgencia.nombreAgencia}</span>
							<p:outputLabel
								value="CEO: #{listaMedicionesMB.evaluacionDTO.empleado.agenciaIdAgencia.ceoAgencia}" />
							<br />
							<p:outputLabel
								value="#{listaMedicionesMB.evaluacionDTO.empleado.agenciaIdAgencia.direccionAgencia}" />
							<br />
							<p:outputLabel
								value="#{listaMedicionesMB.evaluacionDTO.empleado.agenciaIdAgencia.emailAgencia} / #{listaMedicionesMB.evaluacionDTO.empleado.agenciaIdAgencia.telefonoAgencia}" />
							<br />
							<h:outputText
								styleClass="#{listaMedicionesMB.evaluacionDTO.empleado.agenciaIdAgencia.activoAgencia ? 'label label-success':'label label-default'}"
								value="#{listaMedicionesMB.evaluacionDTO.empleado.agenciaIdAgencia.activoAgencia ? 'ACTIVO':'INACTIVO'}" />
								</div>
						</p:panel>


						<p:panel styleClass="ui-panelgrid-blank"
							style="background-color:transparent !important; border:none">

							<div class="description-block text-muted well well-sm no-shadow">
								<h5
									class="description-header description-percentage text-primary">
									ROL EVALUADO <i class="fa fa-user"></i> <span
										class="description-text">#{listaMedicionesMB.listP}</span>
								</h5>

								<hr style="width: 50%; background-color: #007bff !important;" />
								<p:panelGrid columns="2" layout="grid"
									styleClass="ui-panelgrid-blank">
									<p:outputLabel value="Categorías: " />
									<p:outputLabel
										value="#{listaMedicionesMB.listaCategoria.size()}" />
									<p:outputLabel value="Respuestas: " />
									<p:panelGrid columns="3" layout="grid">
										<p:outputLabel styleClass="lable label-success"
											style="padding:3px;border-radius: 5px;"
											value="SI: #{listaMedicionesMB.numeroSICumple}" />
										<p:outputLabel styleClass="lable label-danger"
											style="padding:3px;border-radius: 5px;"
											value="NO: #{listaMedicionesMB.numeroNOCumple}" />
										<p:outputLabel styleClass="lable label-warning"
											style="padding:3px;border-radius: 5px;"
											value="N/A: #{listaMedicionesMB.numeroNOAplica}" />
									</p:panelGrid>
									<p:outputLabel value="Total Respuestas: " />
									<p:outputLabel
										value="#{listaMedicionesMB.listaRespuesta.size()}" />

									<p:panelGrid columns="2" layout="grid">
										<p:outputLabel value="Empleado: " />
										<p:outputLabel
											value="#{listaMedicionesMB.evaluacionDTO.empleado.nombreEmpleado} #{listaMedicionesMB.evaluacionDTO.empleado.apellidoEmpleado}" />
									</p:panelGrid>
									<p:graphicImage style="height: inherit;"
									value="#{listaMedicionesMB.fotoEmpleado}" cache="true"
									alt="Logo Cliente" title="Logo de La Cliente" />
									<p:outputLabel value="Nivel Desempeño: " />
									<h:outputText
										style="font-size:medium; background-color: ##{listaMedicionesMB.rango.colorRango}"
										styleClass="label"
										value="#{listaMedicionesMB.rango.nombreRango}" />
									<p:outputLabel value="Puntuación: " />
									<p:outputLabel value="#{listaMedicionesMB.puntuacion}%" />
								</p:panelGrid>



							</div>
						</p:panel>

						<p:panel styleClass="ui-panelgrid-blank"
							style="background-color:transparent !important; border:none">

							<div class="description-block text-muted well well-sm no-shadow">
								<h5 class="description-header description-percentage text-teal">
									DETALLES VISITA <i class="fa fa-eye"></i>
								</h5>
								<hr style="width: 50%; background-color: #39cccc !important;" />
								<p:panelGrid columns="4" layout="grid"
									styleClass="ui-panelgrid-blank">

									<p:outputLabel value="Creación:		" />
									<p:outputLabel
										value="#{listaMedicionesMB.evaluacionDTO.evaluacion.creaEvaluacion}">
										<f:convertDateTime pattern="dd/MM/yyyy hh:mm"></f:convertDateTime>
									</p:outputLabel>
									<p:outputLabel value="Ejecución:		" />
									<p:outputLabel
										value="#{listaMedicionesMB.evaluacionDTO.evaluacion.fechaEvaluacion}">
										<f:convertDateTime pattern="dd/MM/yyyy hh:mm"></f:convertDateTime>
									</p:outputLabel>



								</p:panelGrid>

								<p:panelGrid columns="2" layout="grid">
									<p:outputLabel value="Inicio:  	" />
									<p:outputLabel
										value="#{listaMedicionesMB.evaluacionDTO.evaluacion.horaInicioEvaluacion}">
										<f:convertDateTime pattern="hh:mm"></f:convertDateTime>
									</p:outputLabel>
									<p:outputLabel value="Fin:  	" />
									<p:outputLabel
										value="#{listaMedicionesMB.evaluacionDTO.evaluacion.horaFinEvaluacion}">
										<f:convertDateTime pattern="hh:mm"></f:convertDateTime>
									</p:outputLabel>

									<p:outputLabel value="Atención:  	" />
									<p:outputLabel
										value="#{listaMedicionesMB.evaluacionDTO.evaluacion.atencionEvaluacion}">
										<f:convertDateTime pattern="hh:mm"></f:convertDateTime>
									</p:outputLabel>




									<p:outputLabel value="Contacto:  	" />
									<p:outputLabel
										value="#{listaMedicionesMB.evaluacionDTO.evaluacion.contactoEvaluacion}">
										<f:convertDateTime pattern="hh:mm"></f:convertDateTime>
									</p:outputLabel>



									<p:outputLabel value="Espera:  	" />
									<p:outputLabel
										value="#{listaMedicionesMB.evaluacionDTO.evaluacion.esperaEvaluacion}">
										<f:convertDateTime pattern="hh:mm"></f:convertDateTime>
									</p:outputLabel>
								</p:panelGrid>


							</div>

						</p:panel>


						<div class="description-block">

							<h5 class="description-header description-percentage text-red">
								EVIDENCIA VISITA <i class="fa fa-film"></i>
							</h5>
							<span class="description-text">#{listaMedicionesMB.evaluacionDTO.evaluacion.observacionEvaluacion}</span>
							<hr style="width: 50%; background-color: #dd4b39 !important;" />
							<h5>
								VIDEO <span class="description-percentage text-red"> <i
									class="fa fa-play"></i>(.webm)
								</span>
							</h5>

							<video
								style="width: 100%; webkit-box-shadow: 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12), 0 11px 15px -7px rgba(0, 0, 0, 0.2); box-shadow: 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12), 0 11px 15px -7px rgba(0, 0, 0, 0.2); border-radius: 2%"
								src="${request.contextPath}/resources/videos/#{listaMedicionesMB.evaluacionDTO.evaluacion.idEvaluacion}/video-#{listaMedicionesMB.evaluacionDTO.evaluacion.idEvaluacion}.webm"
								controls="controls" loop="loop"
								poster="${request.contextPath}/resources/images/portada.gif"
								preload="auto"></video>
						</div>





					</p:panelGrid>


					<p:panelGrid columns="1" layout="grid"
						columnClasses="ui-grid-col-12" styleClass="ui-panelgrid-blank">
						<p:panelGrid columns="1" layout="grid"
							style="width:100% !important" columnClasses="ui-grid-col-12"
							styleClass="ui-panelgrid-blank">





							<p:accordionPanel>
								<p:tab>
									<f:facet name="title">
										<i class="fa fa-bar-chart-o"></i>
										<p:outputLabel value="Resumen: Generados x Categoría" />
									</f:facet>

									<p:dataGrid columns="4" var="item" layout="grid"
										value="#{listaMedicionesMB.listaResp}">
										<p:panel style="height:100%"
											styleClass="box box-solid box-teal">
											<f:facet name="header">

												<p:outputLabel value="#{item.categoria.nombreCategoria}" />
											</f:facet>

											<p:donutChart style="font-size:20px"
												model="#{listaMedicionesMB.crearDonuts(item)}" />
										</p:panel>

									</p:dataGrid>

								</p:tab>
							</p:accordionPanel>
						</p:panelGrid>

						<p:panel styleClass="box box-primary" id="pnlFormulario"
							header="Formulario - CHECKLIST">


							<p:panelGrid columns="1" layout="grid" id="pnlPlantillas"
								columnClasses="ui-grid-col-12">


								<ui:repeat var="item" value="#{listaMedicionesMB.listaResp}">

									<p:panel style="text-align:left"
										styleClass="box box-solid box-default"
										header="#{item.categoria.idCategoria} - #{item.categoria.nombreCategoria}">



										<p:panelGrid columns="1" layout="grid">
											<p:panelGrid columns="3" layout="grid"
												styleClass="box box-solid box-info"
												columnClasses="
										ui-grid-col-8,
										ui-grid-col-2,
										ui-grid-col-2">
												<h:outputText value="Pregunta" />
												<h:outputText value="" />
												<h:outputText value="Observación ?" />
											</p:panelGrid>
											<ui:repeat var="respuesta"
												value="#{item.listaContenidoRespuesta}">
												<p:panelGrid columns="3" layout="grid"
													columnClasses="
										ui-grid-col-8,
										ui-grid-col-2,
										ui-grid-col-2">

													<h:outputText 
														value="#{respuesta.catalogoPregunta.pregunta.nombrePregunta}" />


													<h:outputText rendered="#{respuesta.respuesta.noProcede}"
														styleClass="#{respuesta.respuesta.cumpleRespuesta ? 'label label-success':'label label-danger'}"
														value="#{respuesta.respuesta.cumpleRespuesta ? ' SI CUMPLE':' NO CUMPLE'}" />



													<h:outputText rendered="#{!respuesta.respuesta.noProcede}"
														styleClass="#{respuesta.respuesta.noProcede ? 'label label-success':'label label-warning'}"
														value="#{respuesta.respuesta.noProcede ? ' SI APLICA':' NO APLICA'}" />

													<p:inputTextarea readonly="true"
														value="#{respuesta.respuesta.observacionRespuesta}" />
												</p:panelGrid>
												<p:separator />
											</ui:repeat>



										</p:panelGrid>
									</p:panel>
								</ui:repeat>

							</p:panelGrid>
						</p:panel>


					</p:panelGrid>

				</p:panelGrid>





			</h:form>
		</div>

	</ui:define>

</ui:composition>
